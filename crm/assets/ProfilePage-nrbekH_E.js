import{j as e,P as C,T as n,n as g,o as t,I as o,p as c,q as w,r as d,B as x,C as A,b,m as S,t as N,S as y,a as B}from"./index-DhQHNqrp.js";import{a as D}from"./api-B5d2cEzN.js";import{G as a}from"./Grid-CsHilRCl.js";import{L as l}from"./ListItem-B49oP6uc.js";import{d as L}from"./dayjs.min-Tv9ClbJe.js";import{T as R,a as V,b as k,c as v,d as q}from"./TableRow-DSUve1pt.js";import{T as i}from"./TableCell-oRFRnvLi.js";import{C as I}from"./Chip-D9c2OCYE.js";import{A as z}from"./Alert-dNxEE7vt.js";const G=({info:r})=>e.jsxs(C,{elevation:3,sx:{p:3},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Información del Candidato"}),e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(g,{dense:!0,children:[e.jsxs(l,{children:[e.jsx(t,{children:e.jsx(o,{icon:"ph:phone-fill"})}),e.jsx(c,{primary:"Teléfono",secondary:r.telefono||"No disponible"})]}),e.jsxs(l,{children:[e.jsx(t,{children:e.jsx(o,{icon:"mdi:email"})}),e.jsx(c,{primary:"Email",secondary:r.email||"No disponible"})]}),e.jsxs(l,{children:[e.jsx(t,{children:e.jsx(o,{icon:"mdi:map-marker"})}),e.jsx(c,{primary:"Ciudad",secondary:r.ciudad||"No disponible"})]})]})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(g,{dense:!0,children:[e.jsxs(l,{children:[e.jsx(t,{children:e.jsx(o,{icon:"mdi:card-account-details"})}),e.jsx(c,{primary:"Nº Identidad",secondary:r.identidad||"No disponible"})]}),r.cv_url&&e.jsxs(l,{button:!0,component:"a",href:`https://34-136-149-39.sslip.io${r.cv_url}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(t,{children:e.jsx(o,{icon:"mdi:file-document"})}),e.jsx(c,{primary:"Ver CV",secondary:"Abrir en nueva pestaña"})]})]})}),e.jsxs(a,{item:!0,xs:12,children:[e.jsx(n,{variant:"subtitle1",sx:{mt:2},children:"Observaciones"}),e.jsx(n,{variant:"body2",sx:{whiteSpace:"pre-wrap",bgcolor:"grey.100",p:2,borderRadius:1},children:r.observaciones||"Sin observaciones."})]})]})]}),H={Recibida:"info","En Entrevista":"warning",Contratado:"success",Rechazado:"error","En Proceso":"secondary"},Y=({applications:r})=>e.jsxs(C,{elevation:3,sx:{p:3,mt:3},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Historial de Postulaciones"}),r.length===0?e.jsx(n,{children:"Este candidato aún no ha postulado a ninguna vacante."}):e.jsx(R,{children:e.jsxs(V,{size:"small",children:[e.jsx(k,{children:e.jsxs(v,{children:[e.jsx(i,{children:"Vacante"}),e.jsx(i,{children:"Fecha de Postulación"}),e.jsx(i,{children:"Estado"})]})}),e.jsx(q,{children:r.map(s=>e.jsxs(v,{children:[e.jsx(i,{children:s.cargo_solicitado}),e.jsx(i,{children:L(s.fecha_aplicacion).format("DD/MM/YYYY")}),e.jsx(i,{children:e.jsx(I,{label:s.estado,color:H[s.estado]||"default",size:"small"})})]},s.id_postulacion))})]})})]}),X=()=>{const{candidateId:r}=w(),[s,P]=d.useState(null),[E,h]=d.useState(!0),[f,m]=d.useState(null);if(d.useEffect(()=>{if(!r){m("No se especificó un ID de candidato."),h(!1);return}(async()=>{h(!0),m(null);try{const u=await D.get(`/candidate/profile/${r}`);P(u.data)}catch(u){console.error("Error al cargar el perfil del candidato:",u),m("No se pudo cargar el perfil. Verifique que el candidato exista.")}finally{h(!1)}})()},[r]),E)return e.jsx(x,{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",children:e.jsx(A,{})});if(f||!s)return e.jsxs(x,{p:3.5,textAlign:"center",children:[e.jsx(z,{severity:"error",children:f||"No se encontraron datos para este candidato."}),e.jsx(b,{component:S,to:N.CANDIDATES_SEARCH,variant:"contained",sx:{mt:2},children:"Volver a la Búsqueda"})]});const{infoBasica:j,postulaciones:T,tags:_}=s;return e.jsxs(x,{p:3.5,children:[e.jsxs(y,{direction:{xs:"column",sm:"row"},spacing:3,alignItems:"center",mb:4,children:[e.jsx(B,{sx:{width:100,height:100,fontSize:"3rem",bgcolor:"primary.main"},children:j.nombre_completo.charAt(0)}),e.jsxs(x,{flexGrow:1,children:[e.jsx(n,{variant:"h4",children:j.nombre_completo}),e.jsx(y,{direction:"row",useFlexGap:!0,flexWrap:"wrap",spacing:1,mt:1,children:_.map(p=>e.jsx(I,{label:p.nombre_tag},p.id_tag))})]}),e.jsx(b,{variant:"outlined",children:"Editar Perfil"})]}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,lg:8,children:e.jsx(Y,{applications:T})}),e.jsx(a,{item:!0,xs:12,lg:4,children:e.jsx(G,{info:j})})]})]})};export{X as default};
