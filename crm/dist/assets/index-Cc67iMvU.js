import{aP as k,$ as N,aQ as z,ao as A,aR as L,aS as $,af as D,aH as M,ad as B,b as O,a as q,ab as w,a3 as F,ah as V,as as K,aT as G,aU as H,j as e,r as c,B as p,h as Y,g as l,l as _,P as f,E as W,aV as J,H as U,I as R,J as Q}from"./index-Bn8KBKwd.js";import{a as X}from"./api-D_anxX8K.js";import{d as Z}from"./dayjs.min-ChgqH8Yu.js";import{A as C}from"./Alert-CFAt4psY.js";import{T as ee,a as te,b as ae,c as I,d as re}from"./TableRow-DIs5jovO.js";import{T as S}from"./TableCell-BLk1QvoC.js";import{G as u}from"./Grid-DaJJ7bx8.js";import{L as se}from"./ListItem-_Fiy_2mJ.js";function ne(t,o){return()=>null}function oe(t,o){return()=>null}function ie(t,o,i,s,g){return null}const ce={configure:t=>{k.configure(t)}},le=Object.freeze(Object.defineProperty({__proto__:null,capitalize:N,createChainedFunction:z,createSvgIcon:A,debounce:L,deprecatedPropType:ne,isMuiElement:$,ownerDocument:D,ownerWindow:M,requirePropFactory:oe,setRef:B,unstable_ClassNameGenerator:ce,unstable_useEnhancedEffect:O,unstable_useId:q,unsupportedProp:ie,useControlled:w,useEventCallback:F,useForkRef:V,useIsFocusVisible:K},Symbol.toStringTag,{value:"Module"}));var x={},m={};const de=G(le);var E;function ue(){return E||(E=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.createSvgIcon}});var o=de}(m)),m}var me=H;Object.defineProperty(x,"__esModule",{value:!0});var h=x.default=void 0,pe=me(ue()),fe=e;h=x.default=(0,pe.default)((0,fe.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh");const he=(t,o)=>{if(t==null)return"N/A";if(["tarifa_servicio","monto_pagado","saldo_pendiente","ingresos_mes","salario_final","total_facturado","total_cobrado","total_pendiente"].includes(o)&&typeof t=="number")return`Lps. ${t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`;const s=Z(t);return typeof t=="string"&&s.isValid()?s.format("DD/MM/YYYY h:mm A"):typeof t=="object"?JSON.stringify(t):String(t)},xe=({reportName:t,reportTitle:o})=>{const[i,s]=c.useState([]),[g,j]=c.useState(!0),[v,d]=c.useState(null),[P,y]=c.useState(0),T=async()=>{var n;if(t){j(!0),d(null);try{const a=await X.get(`/reports?name=${t}`),r=Array.isArray(a.data.data)?a.data.data:[a.data.data];r.length===0?d("No hay datos disponibles para este reporte."):s(r)}catch(a){console.error(`Error al cargar el reporte ${t}:`,a);let r="No se pudo cargar el reporte. ";if(a.code==="ERR_NETWORK")r+="Error de conexión. Verifica tu conexión a internet.";else if(a.response)switch(a.response.status){case 401:r="No autorizado. Por favor, inicia sesión nuevamente.";break;case 403:r="No tienes permiso para ver este reporte.";break;case 404:r="El reporte solicitado no existe.";break;case 500:r="Error interno del servidor. Por favor, inténtalo más tarde.";break;default:r+=`Error ${a.response.status}: ${((n=a.response.data)==null?void 0:n.message)||a.message}`}else r+=a.message||"Error desconocido.";d(r)}finally{j(!1)}}};if(c.useEffect(()=>{T()},[t,P]),g)return e.jsxs(p,{display:"flex",justifyContent:"center",alignItems:"center",height:400,children:[e.jsx(Y,{}),e.jsx(l,{variant:"body1",sx:{ml:2},children:"Cargando reporte..."})]});if(v)return e.jsxs(p,{sx:{p:3},children:[e.jsx(C,{severity:"error",action:e.jsx(_,{color:"inherit",size:"small",onClick:()=>y(n=>n+1),startIcon:e.jsx(h,{}),children:"Reintentar"}),sx:{mb:2},children:v}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Si el problema persiste, por favor contacta al soporte técnico."})]});if(i.length===0)return e.jsx(C,{severity:"info",action:e.jsx(_,{color:"inherit",size:"small",onClick:()=>y(n=>n+1),startIcon:e.jsx(h,{}),children:"Reintentar"}),children:"No hay datos disponibles para este reporte."});const b=Object.keys(i[0]);return e.jsxs(f,{elevation:3,sx:{p:3},children:[e.jsx(l,{variant:"h5",gutterBottom:!0,children:o}),e.jsx(ee,{children:e.jsxs(te,{stickyHeader:!0,size:"small",children:[e.jsx(ae,{children:e.jsx(I,{children:b.map(n=>e.jsx(S,{sx:{fontWeight:"bold",textTransform:"capitalize"},children:n.replace(/_/g," ")},n))})}),e.jsx(re,{children:i.map((n,a)=>e.jsx(I,{children:b.map(r=>e.jsx(S,{children:he(n[r],r)},`${a}-${r}`))},a))})]})})]})},ge=[{id:"vacantes_activas",name:"Vacantes Activas",icon:"solar:case-bold"},{id:"postulaciones_recientes",name:"Postulaciones Recientes",icon:"fluent:document-arrow-right-24-filled"},{id:"entrevistas_agendadas",name:"Entrevistas Agendadas",icon:"ph:calendar-check-fill"},{id:"contrataciones_realizadas",name:"Contrataciones Recientes",icon:"fa6-solid:handshake"},{id:"pagos_pendientes",name:"Pagos Pendientes",icon:"fa6-solid:file-invoice-dollar"},{id:"vacantes_sin_movimiento",name:"Vacantes sin Movimiento",icon:"mdi:bed"},{id:"resumen_por_cliente",name:"Resumen por Cliente",icon:"mdi:office-building"},{id:"afiliados_nuevos",name:"Afiliados Nuevos",icon:"ph:user-plus-fill"},{id:"tiempos_promedio",name:"Tiempos Promedio (KPI)",icon:"mdi:clock-fast"},{id:"indicadores_mensuales",name:"Indicadores del Mes (KPI)",icon:"icon-park-solid:data-sheet"}],Se=()=>{const[t,o]=c.useState(null),i=s=>{o(s)};return e.jsxs(p,{p:3.5,children:[e.jsx(l,{variant:"h4",gutterBottom:!0,children:"Centro de Reportes"}),e.jsxs(u,{container:!0,spacing:3,mt:2,children:[e.jsx(u,{item:!0,xs:12,md:4,lg:3,children:e.jsx(f,{elevation:2,children:e.jsx(W,{component:"nav",children:ge.map(s=>e.jsx(se,{disablePadding:!0,children:e.jsxs(J,{selected:(t==null?void 0:t.id)===s.id,onClick:()=>i(s),children:[e.jsx(U,{children:e.jsx(R,{icon:s.icon})}),e.jsx(Q,{primary:s.name})]})},s.id))})})}),e.jsx(u,{item:!0,xs:12,md:8,lg:9,children:t?e.jsx(xe,{reportName:t.id,reportTitle:t.name}):e.jsxs(f,{elevation:2,sx:{p:4,textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx(R,{icon:"mdi:arrow-left",fontSize:48,color:"text.secondary"}),e.jsx(l,{variant:"h6",color:"text.secondary",mt:2,children:"Bienvenido al Centro de Reportes"}),e.jsx(l,{color:"text.secondary",children:"Selecciona un reporte del menú de la izquierda para comenzar."})]})})]})]})};export{Se as default};
