import{r as a,j as r,B as o,S as x,T as c,b as m,m as v,Y as y}from"./index-DhQHNqrp.js";import{d as w}from"./dayjs.min-Tv9ClbJe.js";import{a as j}from"./api-B5d2cEzN.js";import{A as _}from"./Alert-dNxEE7vt.js";import{D as N}from"./DataGrid-DhyTyuOy.js";import"./Chip-D9c2OCYE.js";import"./ClickAwayListener-C8y_CwMB.js";import"./FormControlLabel-Bi2GVg1x.js";import"./TableCell-oRFRnvLi.js";const i=t=>new Intl.NumberFormat("es-HN",{style:"currency",currency:"HNL"}).format(t),E=()=>{const[t,h]=a.useState([]),[g,n]=a.useState(!0),[s,d]=a.useState(null),f=async()=>{n(!0),d(null);try{const e=await j.get("/hired");h(e.data)}catch(e){console.error("Error al obtener los contratados:",e),d("No se pudieron cargar los registros de contratados. Por favor, recargue la página.")}finally{n(!1)}};a.useEffect(()=>{f()},[]);const p=[{field:"nombre_candidato",headerName:"Candidato Contratado",flex:1.5,minWidth:180,renderCell:e=>r.jsx(m,{component:v,to:`/CRM/candidates/profile/${e.row.id_afiliado}`,size:"small",variant:"text",children:e.value})},{field:"cargo_vacante",headerName:"Vacante",flex:1.5,minWidth:180},{field:"fecha_contratacion",headerName:"Fecha de Contratación",flex:1,minWidth:150,valueFormatter:e=>w(e).format("DD/MM/YYYY")},{field:"tarifa_servicio",headerName:"Tarifa (HNL)",type:"number",flex:1,minWidth:120,align:"right",headerAlign:"right",valueFormatter:e=>i(e)},{field:"monto_pagado",headerName:"Monto Pagado (HNL)",type:"number",flex:1,minWidth:140,align:"right",headerAlign:"right",valueFormatter:e=>i(e)},{field:"payment_status",headerName:"Estado de Pago",flex:1.5,minWidth:180,sortable:!1,renderCell:e=>{const u=e.row.tarifa_servicio>0?e.row.monto_pagado/e.row.tarifa_servicio*100:0,l=e.row.tarifa_servicio-e.row.monto_pagado;return r.jsxs(o,{width:"100%",children:[r.jsx(y,{variant:"determinate",value:Math.min(u,100)}),r.jsx(c,{variant:"caption",color:"text.secondary",children:l>0?`${i(l)} pendiente`:"Pagado"})]})}},{field:"actions",headerName:"Acciones",flex:1,minWidth:150,sortable:!1,align:"center",headerAlign:"center",renderCell:e=>r.jsx(m,{variant:"outlined",size:"small",onClick:()=>console.log("Registrar pago para contratado ID:",e.row.id_contratado),children:"Registrar Pago"})}];return r.jsxs(o,{p:3.5,children:[r.jsx(x,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:3,children:r.jsx(c,{variant:"h4",children:"Registro de Contratados y Facturación"})}),s&&r.jsx(_,{severity:"error",sx:{mt:2,mb:2},children:s}),r.jsx(o,{sx:{height:"calc(100vh - 200px)",width:"100%"},children:r.jsx(N,{rows:t,columns:p,loading:g,getRowId:e=>e.id_contratado,initialState:{pagination:{paginationModel:{page:0,pageSize:25}},sorting:{sortModel:[{field:"fecha_contratacion",sort:"desc"}]}},pageSizeOptions:[10,25,50],disableRowSelectionOnClick:!0})})]})};export{E as default};
